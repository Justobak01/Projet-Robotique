clc
clear
close all

%initialise transformation matrices
names = {'T_01' 'T_12' 'T_23' 'T_34' 'T_45' 'T_56'};
for index = 1 : length(names)
    s.(names{index}) = eye(4);  
end

%link lengths (mm) - FIXED
L0 = 70 ;
L1 = 352;
L2 = 360;
L3 = 254;
L4 = 126;
L5 = 65;

%initialising DH matrix 
DH_matrix = zeros(6,4);

DH_matrix(1,3) = L1 ;
DH_matrix(2,1) = -90*(pi/180);
DH_matrix(2,2) = L0;
DH_matrix(3,2) = L2;
DH_matrix(4,1) = -90*(pi/180);
DH_matrix(4,3) = L3+L4;
DH_matrix(5,1) = 90*(pi/180);
DH_matrix(6,1) = -90*(pi/180);


k = 0;
step = 30;

 for q1 = -180:step:180                         % -180:180
     for q2 = -90:step:90                       % -90:90
         for q3 = -230:step:50                  % -230:50
             for q4 = -180:step:180             % -200:200
                 for q5 = -120:step:120         % -120:120
                     for q6 = -90:step:90       % -400:400
                             for i = 1:5
                                 DH_matrix(1,4) = (pi/180)*q1;
                                 DH_matrix(2,4) = (pi/180)*q2-90*(pi/180);
                                 DH_matrix(3,4) = (pi/180)*q3;
                                 DH_matrix(4,4) = (pi/180)*q4;
                                 DH_matrix(5,4) = (pi/180)*q5;
                                 DH_matrix(6,4) = (pi/180)*q6;
                             end
                             
                             %Transformation matrix
                           

                             for j = 1:6
                                 
                                s.(names{j})(1,1) = cos(DH_matrix(j,4)); 
                                s.(names{j})(1,2) = -sin(DH_matrix(j,4));
                                s.(names{j})(1,4) = DH_matrix(j,2); 
                                s.(names{j})(2,1) = sin(DH_matrix(j,4))*cos(DH_matrix(j,1)); 
                                s.(names{j})(2,2) = cos(DH_matrix(j,4)) * cos(DH_matrix(j,1)); 
                                s.(names{j})(2,3) = -sin(DH_matrix(j,1));
                                s.(names{j})(2,4) = -DH_matrix(j,3) * sin(DH_matrix(j,1)); 
                                s.(names{j})(3,1) = sin(DH_matrix(j,4))*sin(DH_matrix(j,1));
                                s.(names{j})(3,2) = cos(DH_matrix(j,4))*sin(DH_matrix(j,1)); 
                                s.(names{j})(3,3) = cos(DH_matrix(j,1)); 
                                s.(names{j})(3,4) = DH_matrix(j,3)*cos(DH_matrix(j,1));
                                s.(names{j})(4,4) = 1;
                                
                             end
                             %Forward matrix solution
                             T = s.T_01*s.T_12 * s.T_23 * s.T_34 * s.T_45*s.T_56;

                                 k = k + 1 ;
                                 
                                 X_pos(k) = T(1,4);
                                 Y_pos(k) = T(2,4);
                                 Z_pos(k) = T(3,4);
                                 
                    end 
                 end
             end
         end
     end
 end
 
x_origin = [0,0,0,0,L3,L3+L4,L3+L4];
y_origin = [0,0,0,0,0,0,0]; 
z_origin = [0,L1,L1+L2,L1+L2,L1+L2,L1+L2,L1+L2-L5]; 
   
scatter3(X_pos,Y_pos,Z_pos,'.');
xlabel('x (mm)') ; ylabel('y (mm)') ; zlabel('z (mm)') ; 
hold on
plot3(x_origin,y_origin,z_origin,'ko-','Linewidth',2)
